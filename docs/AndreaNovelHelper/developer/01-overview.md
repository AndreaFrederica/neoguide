# 项目概述

> **⚠️ 免责声明**：本文档由 **GLM4.7** 自动生成，内容可能存在错误或不完整之处。**请以人工书写的官方文档为准**。

---

Andrea Novel Helper 是一个功能强大的 VS Code 扩展，专为小说作者设计的写作辅助工具。

## 项目定位

### 目标用户
- 小说作者
- 文字创作者
- 需要长文本写作管理的用户

### 核心价值
- 提供一体化的小说写作环境
- 辅助角色与世界观设定管理
- 自动化排版与格式处理
- 多平台同步与备份

## 主要特性

### 1. 角色管理系统

#### 统一对象模型
所有设定元素（角色、敏感词、词汇、正则规则）使用统一的 `Role` 对象模型：

```typescript
export interface Role {
    name: string;                    // 主名称
    type: string;                    // 类型：主角/配角/敏感词/词汇/正则表达式
    uuid?: string;                   // 唯一标识符 (UUID v7)
    affiliation?: string;            // 从属标签
    aliases?: string[];              // 别名数组
    description?: string;            // 简介
    color?: string;                  // 颜色十六进制
    wordSegmentFilter?: boolean;     // 是否启用分词过滤
    packagePath?: string;            // 包路径
    sourcePath?: string;             // 来源文件路径
    regex?: string;                  // 正则表达式模式
    regexFlags?: string;             // 正则表达式标志
    priority?: number;               // 着色器优先级
    fixes?: string[];                // 敏感词修复候选
    [key: string]: any;              // 自定义字段
}
```

#### 多格式支持
- **JSON5**: 结构化数据格式，支持完整属性
- **Markdown**: 易读易写的文档格式
- **TXT**: 纯文本格式，简洁存储

#### 可视化编辑
- 图形化卡片编辑器
- 拖拽式关系管理
- 时间线可视化

### 2. 大纲系统

#### 双重大纲结构

**目录大纲** (`andrea-outline://outline/outline_dir.md`)
- 项目级别的结构视图
- 显示所有章节文件
- 支持文件夹层级

**文件大纲** (`andrea-outline://outline/outline_file.md`)
- 文件级别的结构视图
- 实时解析当前文档
- 支持章节标题导航

#### 懒加载机制
- 按需生成，提高性能
- 可配置的延迟模式
- 智能缓存策略

### 3. 字数统计系统

#### 多维度统计
- **含标点**: 包含所有标点符号
- **不含标点**: 排除标点符号
- **词计**: 基于分词的词汇统计

#### 实时监测
- 编辑器实时更新
- 写作速度计算 (CPM/CPH)
- 历史数据记录

#### 可视化仪表板
- 文件级统计树视图
- 历史趋势图表
- 热力图展示

### 4. 排版辅助系统

#### 智能回车
- 自动处理段落换行
- 智能缩进管理
- 与 Markdown All in One 集成

#### 智能括号
- 成对符号自动补全
- 支持中文引号、书名号等
- 可配置的符号对

#### 自动空行
- 段间自动补充空行
- 可配置空行数量
- 对话格式智能处理

### 5. 同步与备份系统

#### WebDAV 同步
- 多账户管理
- 双向/单向同步
- 增量同步支持
- 冲突解决策略

#### AutoGit
- 自动 Git 提交
- 自动推送远程
- 与 WebDAV 联动
- 状态监控

### 6. 名字生成器

#### 多文化支持
- 中文（简/繁）
- 英文（多地区）
- 日语、韩语
- 欧洲多语言
- 奇幻风格

#### 生成选项
- 性别选择
- 风格选择（现代/经典/奇幻等）
- 数量控制（1-50）
- 包含/排除姓氏

#### 使用统计
- 生成次数统计
- 文化分布分析

### 7. Typst 集成

#### 实时预览
- Typst 文档实时渲染
- 模板系统支持
- 导出功能

#### 内存文件系统
- `andrea-typst://` 虚拟文件系统
- 与编辑器同步更新

### 8. 批注系统

#### 批注管理
- 独立侧边栏视图
- 伏笔管理
- 快速导航

#### 批注类型
- 普通批注
- 伏笔批注
- 待办事项

### 9. 错别字检测

#### 检测能力
- 同音字检测
- 形近字检测
- 常见错误模式

#### 快速修复
- Code Actions 提供
- 批量修复支持
- 自定义词典

### 10. 数据可视化

#### 热力图
- 角色引用热力图
- 文件活跃度热力图

#### 气泡图
- 角色关系气泡图
- 引用频率可视化

#### 圆形堆积图
- 角色引用数据
- 文件时间线数据

## 技术架构

### 前端架构
```
VS Code Extension API
├── Provider 层        // 数据提供器
├── Command 层         // 命令处理
├── Service 层         // 业务服务
└── UI 层             // Webview 界面
```

### 后端架构
```
TypeScript
├── Database         // SQLite 数据库
├── Workers          // Worker 线程
└── Native Modules   // Rust 原生模块
```

## 版本信息

- **当前版本**: 0.4.53
- **发布周期**: 不定期
- **更新渠道**: VS Code Marketplace

## 许可证

MPL-2.0 (Mozilla Public License 2.0)
