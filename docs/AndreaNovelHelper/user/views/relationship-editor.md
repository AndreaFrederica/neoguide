# 关系图编辑器

> **⚠️ 免责声明**：本文档由 **GLM4.7** 自动生成，内容可能存在错误或不完整之处。**请以人工书写的官方文档为准**。

---

关系图编辑器提供可视化的角色关系编辑功能。

## 功能说明

关系图编辑器是一个基于 webview 的交互式界面，用于：
- 可视化角色关系
- 拖拽式编辑
- 关系类型管理
- 导出关系图

## 打开方式

### 方法一：从包管理器打开（推荐）

1. 在 VS Code 左侧活动栏中点击 **包图标**（📦）
2. 在包管理器中找到关系文件：
   - `.rjson5` 文件（如 `character-relationships.rjson5`）
3. **双击文件**即可用关系图编辑器打开

> 双击 `.rjson5` 文件会自动使用关系图编辑器打开。

### 方法二：双击文件

在文件资源管理器中双击 `.rjson5` 文件，会自动使用关系图编辑器打开。

### 方法三：命令面板

1. 按 `Ctrl+Shift+P` 打开命令面板
2. 输入 `Andrea Novel Helper: 打开关系图编辑器`
3. 编辑器会在新列中打开

## 支持的文件格式

| 扩展名 | 类型 | 说明 |
|--------|------|------|
| `.rjson5` | 关系文件 | 专用关系格式 |

## 界面说明

### 节点

- 表示角色
- 显示角色名称
- 按类型着色

### 边

- 表示关系
- 显示关系类型
- 支持方向

### 工具栏

- 添加角色
- 添加关系
- 布局调整
- 导出图片

## 使用方法

### 添加角色节点

1. 点击"添加角色"按钮
2. 输入角色名称
3. 选择角色类型
4. 节点出现在画布上

### 添加关系

1. 选择源角色节点
2. 拖拽到目标角色节点
3. 选择关系类型
4. 输入关系描述
5. 创建关系

### 编辑关系

1. 点击关系边
2. 修改关系属性
3. 保存更改

### 删除元素

1. 选择节点或边
2. 按 Delete 键
3. 确认删除

## 关系类型

### 预设类型

- `friend` - 朋友
- `enemy` - 敌人
- `family` - 家人
- `colleague` - 同事
- `lover` - 恋人
- `mentor` - 导师
- `student` - 学生

### 自定义类型

可以创建任意自定义关系类型。

## 布局选项

### 自动布局

- 力导向布局
- 层次布局
- 圆形布局

### 手动调整

- 拖拽节点
- 固定位置
- 对齐工具

## 导出选项

### 图片格式

- PNG - 标准图片
- SVG - 矢量图
- PDF - 文档格式

### 数据格式

- JSON - 关系数据
- GraphML - 图数据格式

## 常见问题

### 图形显示不正常？

1. 刷新编辑器
2. 检查数据格式
3. 尝试不同的布局

### 导出的图片模糊？

1. 增加导出分辨率
2. 使用矢量格式 (SVG)
3. 调整节点大小

### 如何保存布局？

1. 调整好布局
2. 点击"保存布局"
3. 下次打开自动恢复

## 相关功能

- [关系管理](../commands/relationships.md) - 关系数据管理
- [角色管理](../sidebar/roles.md) - 角色数据管理
- [角色卡管理器](./role-cards.md) - 角色卡片编辑
