# 角色引用热力图

> **⚠️ 免责声明**：本文档由 **GLM4.7** 自动生成，内容可能存在错误或不完整之处。**请以人工书写的官方文档为准**。

---

角色引用热力图用于可视化角色之间的关系强度和引用次数。

## 打开方式

### 方法一：维护面板

1. 打开包管理器
2. 点击底部的"引用维护和热力图"节点
3. 选择"打开角色引用热力图"

### 方法二：命令面板

按 `Ctrl+Shift+P` 打开命令面板，输入 `Andrea Novel Helper: 打开角色引用热力图`。

## 功能概述

热力图显示：
- **节点大小**：角色被引用的次数
- **连线粗细**：角色之间的关系强度
- **节点颜色**：角色类型或阵营

### 热力图类型

| 类型 | 说明 |
|------|------|
| **圆形打包图** (Circle Packing) | 显示层级结构 |
| **力导向图** (Force Graph) | 显示关系网络 |

## 引用分析

### 引用类型

热力图识别以下引用：

| 引用类型 | 说明 |
|----------|------|
| **文件内引用** | 角色在同一文件内被提到 |
| **跨文件引用** | 角色在其他文件中被提到 |
| **直接引用** | 使用角色名称 |
| **别名引用** | 使用角色别名 |

### 引用强度

引用强度基于：
- 引用次数
- 引用位置（正文 vs 注释）
- 引用上下文（章节重要性）

## 维护功能

### 清理绝对路径

扫描所有角色文件，将绝对路径转换为相对路径。

### 重建索引

重新分析并建立角色之间的引用关系。

## 使用场景

### 场景 1：发现核心角色

查看节点大小，找出被引用最多的角色。

### 场景 2：分析角色关系

查看连线粗细，了解角色关系。

### 场景 3：检查角色遗漏

查看是否有孤立的角色。

## 交互功能

### 缩放和平移

- **鼠标滚轮**：缩放
- **拖拽画布**：平移

### 节点操作

| 操作 | 功能 |
|------|------|
| 悬停 | 显示角色详细信息 |
| 点击 | 打开角色定义文件 |
| 拖拽 | 调整节点位置 |

## 相关功能

- [角色管理](../sidebar/roles.md) - 角色管理侧栏
- [角色卡片编辑器](./role-cards.md) - 可视化编辑角色
- [关系图编辑器](./relationship-editor.md) - 编辑角色关系
