# 智能回车

> **⚠️ 免责声明**：本文档由 **GLM4.7** 自动生成，内容可能存在错误或不完整之处。**请以人工书写的官方文档为准**。

---

智能回车功能优化了写作时的换行体验，包括**跳出括号**和**智能分段**。

## 功能说明

### 1. 智能跳出 (Smart Exit)

当光标位于闭合符号（括号、引号等）前时，按回车会跳出该符号而不是换行：

```
「你好世界」|        → 按 Enter → 「你好世界」|
                   (光标移到引号外)
```

支持的闭合符号：
- 括号：`()`, `[]`, `{}`
- 引号：`""`, `''`, `「」`, `『』`

### 2. 智能分段 (Smart Cut)

在段落末尾按回车时，会：
- 自动添加段落间的空行（可配置数量）
- 自动添加段首缩进
- 移除行尾空格

```
第一段结尾|
按 Enter
↓
第一段结尾
<空行>
    新段落开始|
```

### 3. 普通换行

在以下情况下使用普通换行（不添加空行和缩进）：
- 行中间有文字时
- 空行时
- 光标前全是空白时

## 设置选项

在 VS Code 设置中搜索 `andrea.typeset`：

| 设置项 | 说明 | 默认值 |
|--------|------|--------|
| `enableSmartEnter` | 启用智能分段 | `true` |
| `enableSmartExit` | 启用智能跳出 | `true` |
| `blankLinesBetweenParas` | 段落间空行数 | `1` |

## 使用方法

### 智能跳出

1. 将光标放在闭合符号前
2. 按回车键
3. 光标自动跳出符号

### 智能分段

1. 在段落末尾按回车
2. 自动添加空行和缩进
3. 继续输入新段落

## 工作区禁用

如果工作区被禁用（`workspaceDisabled` 为 true），智能回车功能会使用原生回车行为。

## 注意事项

### Markdown 结构保护

智能分段不会处理以下 Markdown 结构：
- 标题 (`#`)
- 引用 (`>`)
- 列表 (`-`, `*`, `+`, `1.`)
- 代码块 (`` ` ``)
- 表格 (`|`)

### 缩进单位

段首缩进使用编辑器的缩进设置：
- 如果使用空格：按照 Tab Size 设置
- 如果使用 Tab：使用制表符

可在设置中配置 `andrea.typeset.firstLineIndentSpaces` 覆盖此行为。

## 常见问题

### 智能分段没有生效？

1. 检查是否启用了 `enableSmartEnter`
2. 确认光标在段落末尾（行尾）
3. 确认不是 Markdown 结构行

### 智能跳出没有生效？

1. 检查是否启用了 `enableSmartExit`
2. 确认光标在闭合符号前
3. 确认该符号在配对列表中

### 如何调整段落间距？

修改 `andrea.typeset.blankLinesBetweenParas` 设置：
- `0` - 段落间不留空
- `1` - 段落间留一行空（默认）
- `2` - 段落间留两行空

## 相关功能

- [自动配对](./auto-pairs.md) - 自动闭合括号和引号
- [格式化](./formatting.md) - 文档格式化
- [基础工作流程](../getting-started/basic-workflow.md) - 写作流程
