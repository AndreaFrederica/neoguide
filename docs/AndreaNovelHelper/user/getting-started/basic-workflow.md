# 基础工作流程

> **⚠️ 免责声明**：本文档由 **GLM4.7** 自动生成，内容可能存在错误或不完整之处。**请以人工书写的官方文档为准**。

---

本文介绍使用 Andrea Novel Helper 从零开始写小说的基本流程。

## 准备工作

### 1. 安装扩展

参考[安装与设置](./installation.md)完成扩展安装。

### 2. 打开工作区

确保你的小说项目在 VS Code 中作为工作区打开：

- 文件 > 打开文件夹
- 选择你的项目文件夹

### 3. 运行初始化向导

首次使用建议运行[项目初始化向导](./first-run.md)，它会帮你：
- 创建项目配置文件
- 创建角色库等模板文件
- 配置 Git（可选）
- 设置忽略规则

## 创建角色

### 方法一：使用角色库文件

1. 在左侧活动栏点击 **角色** 图标
2. 双击打开角色库文件（如 `roles.md` 或 `character-gallery.json5`）
3. 按照模板格式添加角色

### 方法二：从选中文本添加

1. 在文档中选中角色名称
2. 右键选择 **Andrea Novel Helper: 从选中文本添加角色**
3. 填写角色信息并保存

### 角色库示例

**JSON5 格式** (`character-gallery.json5`):
```json5
[
    {
        name: "张三",
        type: "主角",
        color: "#E60033",
        aliases: ["小张", "阿三"],
        description: "故事的主角"
    }
]
```

**Markdown 格式** (`roles.md`):
```markdown
# 张三

- 类型: 主角
- 颜色: #E60033
- 别名: 小张、阿三
- 描述: 故事的主角
```

## 创建章节文件

### 推荐的目录结构

```
我的小说/
├── anhproject.md           # 项目配置
├── novel-helper/           # 助手数据目录
│   ├── character-gallery.json5
│   └── ...
├── 第一卷/
│   ├── 第一章.md
│   ├── 第二章.md
│   └── ...
└── 第二卷/
    └── ...
```

### 新建章节

**方法一：使用字数统计面板**
1. 在左侧活动栏点击 **字数统计** 图标
2. 右键点击文件夹或面板底部
3. 选择 **在此处上方新建文件** 或 **在此处下方新建文件**
4. 输入文件名（如 `第一章.md`）

**方法二：手动创建**
1. 在文件管理器中创建新文件
2. 使用 `.md` 或 `.txt` 扩展名

## 开始写作

### 编辑器功能

当你开始写作时，扩展会自动提供以下功能：

#### 角色高亮
- 文档中的角色名称会自动高亮显示
- 鼠标悬停查看角色详情

#### 自动补全
- 输入角色名称时会自动提示
- 按 `Tab` 或 `Enter` 接受建议

#### 智能回车
- 按 `Enter` 自动处理段落格式
- 支持对话格式自动换行

#### 自动配对
- 输入左引号自动补全右引号
- 支持「」『』""() 等符号

### 查看大纲

1. 在左侧活动栏点击 **大纲** 图标
2. **目录大纲** 显示所有章节文件
3. **文件大纲** 显示当前文档的章节结构

## 查看字数

### 字数统计面板

1. 在左侧活动栏点击 **字数统计** 图标
2. 展开文件夹查看各章节字数
3. 面板底部显示项目总字数

### 排序章节

1. 右键点击文件夹
2. 选择 **启用手动排序**
3. 拖拽文件调整顺序

## 备份与同步

### WebDAV 同步（推荐）

1. 在左侧活动栏点击 **同步** 图标
2. 点击 **登录账户** 添加 WebDAV 账户
3. 关联项目并同步

支持的服务：
- 坚果云
- iCloud
- Nextcloud
- ownCloud

### AutoGit（可选）

如果你使用 Git：
1. 在左侧活动栏点击 **AutoGit** 图标
2. 启用 AutoGit 功能
3. 扩展会自动提交和推送

## 导出作品

### 导出为 PDF

1. 使用命令面板（`Ctrl+Shift+P`）
2. 输入 `Andrea Novel Helper: Typst 导出当前文档`
3. 选择导出选项

### 复制字数统计

1. 在字数统计面板中右键点击
2. 选择 **复制统计信息**

## 常用快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Shift+P` | 打开命令面板 |
| `Enter` | 智能换行（编辑器中） |
| `Tab` | 接受自动补全 |
| `Ctrl+S` | 保存文件 |

## 每日写作流程

### 打开项目
1. 打开 VS Code
2. 打开你的小说项目工作区

### 开始写作
1. 在字数统计中找到要写的章节
2. 双击打开章节文件
3. 开始写作

### 查看进度
- 字数统计面板查看总字数
- 状态栏查看今日写作字数
- 大纲查看整体结构

### 保存备份
- 保存文件（`Ctrl+S`）
- WebDAV 自动同步（如已配置）
- AutoGit 自动提交（如已配置）

## 进阶功能

当你熟悉基础流程后，可以尝试：

- [角色卡片编辑器](../views/role-cards.md) - 可视化编辑角色
- [关系图编辑器](../views/relationship-editor.md) - 管理角色关系
- [时间线编辑器](../views/timeline-editor.md) - 管理故事时间线
- [批注管理](../sidebar/comments.md) - 添加批注和伏笔
- [名字生成器](../commands/name-generator.md) - 随机生成角色名

## 获取帮助

- 查看功能列表：[用户指南首页](../README.md)
- 查看具体功能文档：按功能分类查阅
- 在 GitHub 提交 Issue 报告问题
