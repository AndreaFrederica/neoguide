# 公式工具

> **⚠️ 免责声明**
>
> 本文档由 **GLM4.7** 自动生成，内容可能存在错误或不完整之处。
> **请以人工书写的官方文档为准**。

---

公式工具支持自定义表达式和 JavaScript 代码，实现复杂计算。

## 模式

### 表达式模式 (expr)

使用简单的数学表达式。

**配置：**
- 模式：`expr`
- 表达式：数学表达式（如 `a*b + c`）
- 参数：参数名列表（逗号分隔）

**示例：**
```
表达式: length * width * height
参数: length, width, height
```

### JavaScript 模式 (js)

编写 JavaScript 代码实现复杂逻辑。

**配置：**
- 模式：`js`
- 代码：JavaScript 代码
- 输出变量名：结果变量名

**示例：**
```javascript
// 计算圆面积
const radius = params.r || 0;
out = Math.PI * radius * radius;
```

## 参数配置

### 添加参数

1. 在"参数"输入框中输入参数名（逗号分隔）
2. 为每个参数设置默认值
3. 运行时可修改参数值

**示例：**
```
参数: a, b, c
默认值:
  a = 10
  b = 20
  c = 5
```

## 引用其他工具

### 引用计时器值

```
引用名称: @timer1
```

在代码中：
```javascript
const elapsed = params.timer1 || 0;
```

### 引用计算器值

```
引用名称: @calc1
```

## 输出配置

### 输出变量名

设置输出的变量名，可以被其他工具引用。

**示例：**
- 输出变量名：`area`
- 其他工具引用：`@area`

### 自动运行公式

勾选后，参数变化时自动重新计算。

## 测试功能

编辑时可以点击"运行测试"验证公式：

1. 使用默认值进行计算
2. 显示测试结果
3. 调试公式逻辑

## 使用场景

- 科学计算
- 单位转换
- 数据分析
- 自动化计算
- 任何需要自定义公式的场景

---

[← 返回交互工具](./)
