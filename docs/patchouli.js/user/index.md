# 用户文档

欢迎来到 Patchouli.js 用户文档！本指南将帮助你使用 Patchouli.js 阅读文档。

## 目录

- [快速开始](#快速开始)
- [阅读模式](#阅读模式)
- [功能使用](#功能使用)
- [EPUB 支持](#epub-支持)
- [常见问题](#常见问题)

---

## 快速开始

### 前置要求

- 现代浏览器（支持 Vue 3）
- EPUB 文件（可选）

### 项目状态

> **⚠️ 注意：Patchouli.js 尚未达到发布标准！**
>
> 当前版本需要手动引入和配置挂载生命周期。

### 开发测试

项目提供了 `public/epub.py` 用于开发测试：

```bash
# 准备你的 EPUB 文件
python public/epub.py

# 启动开发服务器
npm run dev
```

---

## 阅读模式

Patchouli.js 提供三种阅读模式：

### 1. 流式阅读器

**特点：**
- 直接渲染 RAW 文档
- 最强的兼容性
- 类似传统网页浏览

**适用场景：**
- 复杂排版的文档
- 包含大量脚注的书籍
- 需要保持原始格式的内容

### 2. 高阶分页器

**特点：**
- 基于段落+字符碰撞实现分页
- 显示效果更好
- 目前不支持排版规则

**适用场景：**
- 小说类电子书
- 文字为主的文档
- 需要模拟纸质书体验

**限制：**
- 不支持排版规则
- 可能遇到排版意外

### 3. 低阶分页器

**特点：**
- 基于段落碰撞实现分页
- 能避免排版意外

**适用场景：**
- 简单结构的文档
- 快速预览

**限制：**
- 超长段落会出现不可预料的错误
- 需谨慎使用

---

## 功能使用

### 翻页功能

提供上一页、下一页的翻页控制：

- 点击浮动面板的翻页按钮
- 使用键盘快捷键（如果支持）
- 滑动/触摸手势（移动端）

### 字体大小调整

动态调整文档字体大小：

1. 打开浮动控制面板
2. 找到字体设置
3. 调整正文和标题字体大小
4. 实时预览效果

### 模式切换

在单页和分页模式之间切换：

1. 点击浮动控制面板
2. 选择阅读模式
3. 应用更改

### 折叠面板

浮动控制面板包含：

- 翻页控制
- 字体设置
- 模式切换
- 其他阅读选项

---

## EPUB 支持

### EPUB 格式

Patchouli.js 支持 EPUB 格式的电子书：

- **EPUB 2.0** - ✅ 支持
- **EPUB 3.0** - ⚠️ 部分支持

### 开发服务器

使用提供的测试服务器：

```bash
python public/epub.py
```

### 注意事项

- 图片需要网络连接或本地缓存
- 复杂的 CSS 可能需要额外处理
- JavaScript 交互目前不支持

---

## 常见问题

### Q: 为什么分页不正确？

**A:** 可能的原因：
1. 使用了低阶分页器，遇到超长段落
2. 文档包含复杂的排版规则
3. 图片没有正确预缓存

**解决方法：**
- 尝试切换到高阶分页器或流式阅读器
- 检查 EPUB 文件是否规范
- 预加载图片

### Q: 字体大小调整后显示异常？

**A:** 某些 CSS 可能与动态字体大小冲突。

**解决方法：**
- 刷新页面
- 重置字体设置
- 尝试其他阅读模式

### Q: EPUB 文件无法打开？

**A:** 检查：
1. 文件格式是否正确（.epub）
2. 文件是否损坏
3. 控制台是否有错误信息

### Q: 翻页按钮没有响应？

**A:** 可能是 JavaScript 错误。

**解决方法：**
- 检查浏览器控制台
- 刷新页面
- 确保所有依赖已正确加载

### Q: 如何提高加载速度？

**A:**
- 使用本地 EPUB 文件
- 预缓存图片
- 关闭不必要的浏览器扩展
- 使用性能更好的设备

### Q: 支持哪些文档格式？

**A:**
- **HTML** - ✅ 完全支持
- **EPUB** - ✅ 部分支持
- **PDF** - ❌ 不支持
- **TXT** - ❌ 暂不支持

### Q: 能否导出阅读进度？

**A:** 当前版本不支持，但已在计划中。

### Q: 如何添加书签？

**A:** 当前版本不支持，但已在待办事项中。

---

## 快捷键

（取决于实现）

| 功能 | 快捷键 |
|------|--------|
| 上一页 | ← / Page Up |
| 下一页 | → / Page Down |
| 打开控制面板 | Esc |
| 全屏模式 | F11 |

---

## 技术支持

如遇到问题：
1. 查看 [开发者文档](../developer/)
2. 提交 [GitHub Issue](https://github.com/andrea-novel-helper/patchouli.js/issues)

---

*祝您阅读愉快！📚*
